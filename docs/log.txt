
while True:
    tick = mt5.symbol_info_tick(symbol)
    
    if signal['direction'] == 'long':
        if tick.last >= precio_entrada + tp_pips*0.0001:  # TP alcanzado
            cerrar_operacion()
            break
        elif tick.last <= precio_entrada - sl_pips*0.0001:  # SL alcanzado
            cerrar_operacion()
            break
    elif signal['direction'] == 'short':
        if tick.last <= precio_entrada - tp_pips*0.0001:  # TP alcanzado
            cerrar_operacion()
            break
        elif tick.last >= precio_entrada + sl_pips*0.0001:  # SL alcanzado
            cerrar_operacion()
            break

    time.sleep(1)



